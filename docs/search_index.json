[
["index.html", "Road to Prediction Prerequiste", " Road to Prediction Sebastian Nickel September 20, 2018 Prerequiste This project’s goal is to predict when highways were built with the help of NASA Landsat satellite images and machine learning techniques. Everything here is work in progress. "],
["introduction.html", "Chapter 1 Introduction", " Chapter 1 Introduction I decided to test the idea of road prediction on the North-Eastern German state of Mecklenburg-Vorpommern (MV). MV is one of the “new” German states and former territory of the German Democratic Republic (GDR). In the 90s and 2000s after the former GDR territories joined the Federal Republic of Germany a lot of development projects were carried out in the new states to promote “flourishing landscapes”. Most notably in MV the motorway A20 (so-called Baltic Sea motorway) was built. I only rely on Landsat images of Landsat 4 and higher because the resolution on Landsat 1-3 is not high enough. Landsat 4 started in 1982 and the resolution for 5 of the 7 band is 30 square meters at the equator. "],
["extracting-road-data.html", "Chapter 2 Extracting road data", " Chapter 2 Extracting road data The road data for MV is extracted via the overpass API, the necessary overpass package is provided by hrbrmstr. I extract two types of roads, first the highways and then all primary roads. Especially, the second query is time consuming. library(overpass) library(rgdal) library(tidyverse) library(raster) library(sf) library(geosampling) options(stringsAsFactors = FALSE) ## Reading layer `gadm36_DEU_1&#39; from data source `C:\\Users\\xnicse\\Dropbox\\Projects\\road_to_prediction\\data\\spatial\\gadm\\gadm36_DEU_1.shp&#39; using driver `ESRI Shapefile&#39; ## Simple feature collection with 16 features and 10 fields ## geometry type: MULTIPOLYGON ## dimension: XY ## bbox: xmin: 5.866251 ymin: 47.27012 xmax: 15.04181 ymax: 55.05653 ## epsg (SRID): 4326 ## proj4string: +proj=longlat +datum=WGS84 +no_defs Figure 2.1: Mecklenburg-Vorpommern and bounding box in red. motorway_query &lt;- &#39;[out:xml][timeout:100]; ( node[&quot;highway&quot;=&quot;motorway&quot;](53,10.5,54.7,14.5); way[&quot;highway&quot;=&quot;motorway&quot;](53,10.5,54.7,14.5); relation[&quot;highway&quot;=&quot;motorway&quot;](53,10.5,54.7,14.5); ); out body; &gt;; out skel qt;&#39; motorway_spatial &lt;- overpass_query(motorway_query) primary_query &lt;- &#39;[out:xml][timeout:100]; ( node[&quot;highway&quot;=&quot;primary&quot;](53,10.5,54.7,14.5); way[&quot;highway&quot;=&quot;primary&quot;](53,10.5,54.7,14.5); relation[&quot;highway&quot;=&quot;primary&quot;](53,10.5,54.7,14.5); ); out body; &gt;; out skel qt;&#39; primary_spatial &lt;- overpass_query(primary_query) ## OGR data source with driver: ESRI Shapefile ## Source: &quot;C:\\Users\\xnicse\\Dropbox\\Projects\\road_to_prediction\\ouput\\roads_in_mv\\motorway.shp&quot;, layer: &quot;motorway&quot; ## with 2355 features ## It has 81 fields ## OGR data source with driver: ESRI Shapefile ## Source: &quot;C:\\Users\\xnicse\\Dropbox\\Projects\\road_to_prediction\\ouput\\roads_in_mv\\primary.shp&quot;, layer: &quot;primary&quot; ## with 9003 features ## It has 271 fields Figure 2.2: MV with motorways (red) and primary roads (blue). "],
["be-ready-to-download-nasa.html", "Chapter 3 Be ready to download NASA", " Chapter 3 Be ready to download NASA Unfortunately, the NASA Landsat images need to be selected via an online mask on USGS’s webpage. My approach was to extract the identifier of the images that I want to download and then feed them into the USGS website. This way a bulk download is possible. The necessary file to identify the images can be downloaded from USGS. I only care about pictures taken between June and August. The reason is that the sizes of the images are large, including scences from the whole year means that the reflected colors change and thus, more images are necessary to train the algorith. Additionally, clouds block the view and I assume that there are less clouds in the summer than in the winter, which increases the number of useable scenes. library(tidyverse) library(rgdal) library(rgeos) library(raster) # library(osmar) # library(tmaptools) # library(osmdata) # library(sebstoolkit2) options(stringsAsFactors = FALSE) wrs2&lt;-readOGR(&quot;data/spatial/wrs2/wrs2_descending.shp&quot;) proj4string(wrs2) mv&lt;-readOGR(&quot;data/spatial/gadm/gadm36_DEU_1.shp&quot;) mv &lt;- mv[mv$NAME_1==&quot;Mecklenburg-Vorpommern&quot;,] mv_bbox&lt;-bbox(mv) mv_rec&lt;-rbind(cbind(mv_bbox[1,1],mv_bbox[2,]), cbind(mv_bbox[1,2],mv_bbox[2,] %&gt;% rev)) %&gt;% Polygon() %&gt;% list %&gt;% Polygons(ID = 1) %&gt;% list %&gt;% SpatialPolygons(proj4string = CRS(proj4string(mv))) wrs2 %&gt;% head plot(wrs2[which(!is.na(over(wrs2,mv_rec,returnList =FALSE))),]) plot(wrs2[paste0(wrs2$PATH,wrs2$ROW)%in%c(&quot;19422&quot;,&quot;19522&quot;),]) plot(mv_rec,add=TRUE,col=&quot;red&quot;) scenes&lt;-wrs2$WRSPR[which(!is.na(over(wrs2,mv_rec,returnList =FALSE)))] # now put them in online # earthexplorer # not here: this is for later https://espa.cr.usgs.gov/ # and then retrieve all scenes scenes&lt;-read.csv(&quot;a20/LSR_LANDSAT_TM_C1_265706.csv&quot;) mean(scenes$Land.Cloud.Cover&lt;50) scenes$Scene.Cloud.Cover %&gt;% density %&gt;% plot cor.test(scenes$Land.Cloud.Cover,scenes$Scene.Cloud.Cover) # scenes&lt;-read.csv(&quot;./a20/LSR_LANDSAT_TM_C1_244353.csv&quot;) # 1 scene from 1988 # 1 scene from 2011 whats_there&lt;-list.files(&quot;./a20/scenes&quot;) %&gt;% strsplit(&quot;-&quot;) %&gt;% get.element.from.list(1) whats_there_years&lt;-whats_there %&gt;% substr(11,14) %&gt;% as.numeric sc&lt;-scenes %&gt;% filter(Land.Cloud.Cover&lt;50&amp;Spacecraft.Identifier==&quot;LANDSAT_5&quot;) %&gt;% mutate(Date=Acquisition.Date %&gt;% strsplit(&quot;/&quot;)%&gt;% get.element.from.list(1) %&gt;% as.numeric) %&gt;% mutate(LPI=Landsat.Product.Identifier %&gt;% gsub(&quot;_&quot;,&quot;&quot;,.)) %&gt;% filter(!LPI%in%whats_there) %&gt;% # filter(!Date%in%whats_there_years&amp;Date&gt;1990&amp; # WRS.Path==194) %&gt;% dplyr::select(Landsat.Product.Identifier,Date) sc$Landsat.Product.Identifier %&gt;% substr(22,23) %&gt;% as.numeric %&gt;% table sc %&gt;% nrow sc&lt;-sc$Landsat.Product.Identifier[sapply(sc$Date %&gt;% unique,function(y) which(sc$Date==y)[1])] f1&lt;-file(&quot;./a20/2_scenes.txt&quot;) writeLines(text = sc,con = f1) close(f1) a20_rec_reproj&lt;-spTransform(mv_rec,CRS(&quot;+proj=utm +zone=33 +datum=WGS84 +units=m +no_defs +ellps=WGS84 +towgs84=0,0,0&quot;)) a20_part_reproj&lt;-spTransform(a20_part,CRS(proj4string(both_years[[1]]))) "]
]
